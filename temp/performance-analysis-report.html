<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APIæ€§èƒ½åˆ†ææŠ¥å‘Š - /api/v1/questions/generate</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
            line-height: 1.6;
        }
        .container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 20px;
        }
        .header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .summary-section {
            background-color: #fff5f5;
            border-left: 4px solid #e53e3e;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 4px;
        }
        .analysis-section {
            background-color: #f0fff4;
            border-left: 4px solid #38a169;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 4px;
        }
        .optimization-section {
            background-color: #fffaf0;
            border-left: 4px solid #ed8936;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 4px;
        }
        .code-block {
            background-color: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 10px 0;
        }
        .performance-chart {
            background-color: #f7fafc;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .phase-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            background-color: #f7fafc;
            border-radius: 6px;
            border-left: 4px solid #4299e1;
        }
        .phase-number {
            background-color: #4299e1;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
            margin-right: 15px;
        }
        .phase-details {
            flex: 1;
        }
        .phase-name {
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 5px;
        }
        .phase-time {
            color: #718096;
            font-size: 14px;
        }
        .progress-bar {
            width: 200px;
            height: 8px;
            background-color: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin-left: 20px;
        }
        .progress-fill {
            height: 100%;
            background-color: #4299e1;
            transition: width 0.3s ease;
        }
        .critical {
            background-color: #e53e3e !important;
        }
        .warning {
            background-color: #ed8936 !important;
        }
        .success {
            background-color: #38a169 !important;
        }
        .bottleneck {
            background-color: #e53e3e;
            color: white;
            padding: 10px;
            border-radius: 6px;
            margin: 10px 0;
            font-weight: bold;
        }
        .optimization-item {
            background-color: #f7fafc;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
            border-left: 4px solid #38a169;
        }
        .optimization-title {
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 8px;
        }
        .optimization-desc {
            color: #4a5568;
            margin-bottom: 10px;
        }
        .optimization-benefit {
            background-color: #e6fffa;
            padding: 8px;
            border-radius: 4px;
            font-size: 14px;
            color: #234e52;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ” APIæ€§èƒ½åˆ†ææŠ¥å‘Š</h1>
            <p>æ¥å£ï¼š<code>/api/v1/questions/generate</code> - è€—æ—¶58ç§’åˆ†æ</p>
        </div>

        <div class="summary-section">
            <h2>ğŸ“Š æ€§èƒ½æ¦‚è§ˆ</h2>
            <div class="bottleneck">
                ğŸš¨ ä¸»è¦ç“¶é¢ˆï¼šAI APIè°ƒç”¨è€—æ—¶55ç§’ï¼Œå æ€»è€—æ—¶çš„94.6%
            </div>
            <p><strong>æ€»è€—æ—¶ï¼š</strong> 58.13ç§’</p>
            <p><strong>æ€§èƒ½è¯„çº§ï¼š</strong> B (ä¸€èˆ¬) - éœ€è¦ä¼˜åŒ–</p>
            <p><strong>ä¸»è¦é—®é¢˜ï¼š</strong> DeepSeek AI APIå“åº”æ—¶é—´è¿‡é•¿</p>
        </div>

        <div class="analysis-section">
            <h2>ğŸ“ˆ è€—æ—¶åˆ†å¸ƒåˆ†æ</h2>
            <div class="performance-chart">
                <div class="phase-item">
                    <div class="phase-number">1</div>
                    <div class="phase-details">
                        <div class="phase-name">AI APIè°ƒç”¨ - DeepSeek</div>
                        <div class="phase-time">55.00ç§’ (94.6%) - ä¸»è¦ç“¶é¢ˆ</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill critical" style="width: 94.6%"></div>
                    </div>
                </div>
                
                <div class="phase-item">
                    <div class="phase-number">2</div>
                    <div class="phase-details">
                        <div class="phase-name">AIå“åº”è§£æ</div>
                        <div class="phase-time">1.00ç§’ (1.7%)</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 1.7%"></div>
                    </div>
                </div>
                
                <div class="phase-item">
                    <div class="phase-number">3</div>
                    <div class="phase-details">
                        <div class="phase-name">æ•°æ®åº“ä¿å­˜ - é—®é¢˜æ•°æ®</div>
                        <div class="phase-time">0.80ç§’ (1.4%)</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 1.4%"></div>
                    </div>
                </div>
                
                <div class="phase-item">
                    <div class="phase-number">4</div>
                    <div class="phase-details">
                        <div class="phase-name">ç¼“å­˜æ£€æŸ¥</div>
                        <div class="phase-time">0.51ç§’ (0.9%)</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0.9%"></div>
                    </div>
                </div>
                
                <div class="phase-item">
                    <div class="phase-number">5</div>
                    <div class="phase-details">
                        <div class="phase-name">æ•°æ®åº“æŸ¥è¯¢ - ç®€å†ä¿¡æ¯</div>
                        <div class="phase-time">0.21ç§’ (0.4%)</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0.4%"></div>
                    </div>
                </div>
                
                <div class="phase-item">
                    <div class="phase-number">6</div>
                    <div class="phase-details">
                        <div class="phase-name">æ•°æ®åº“æ›´æ–° - ä¼šè¯çŠ¶æ€</div>
                        <div class="phase-time">0.21ç§’ (0.4%)</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0.4%"></div>
                    </div>
                </div>
                
                <div class="phase-item">
                    <div class="phase-number">7</div>
                    <div class="phase-details">
                        <div class="phase-name">å“åº”æ„å»ºå’Œè¿”å›</div>
                        <div class="phase-time">0.20ç§’ (0.3%)</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0.3%"></div>
                    </div>
                </div>
                
                <div class="phase-item">
                    <div class="phase-number">8</div>
                    <div class="phase-details">
                        <div class="phase-name">æ•°æ®åº“æŸ¥è¯¢ - ä¼šè¯ä¿¡æ¯</div>
                        <div class="phase-time">0.11ç§’ (0.2%)</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0.2%"></div>
                    </div>
                </div>
                
                <div class="phase-item">
                    <div class="phase-number">9</div>
                    <div class="phase-details">
                        <div class="phase-name">è¯·æ±‚éªŒè¯å’Œè§£æ</div>
                        <div class="phase-time">0.11ç§’ (0.2%)</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0.2%"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="analysis-section">
            <h2>ğŸ” é—®é¢˜æ ¹æºåˆ†æ</h2>
            
            <h3>1. ä¸»è¦ç“¶é¢ˆï¼šAI APIè°ƒç”¨ (55ç§’)</h3>
            <div class="code-block">
# é—®é¢˜ä»£ç ä½ç½®ï¼šbackend/app/services/ai_question_generator.py
response = client.chat.completions.create(
    model=self.model,  # "deepseek-chat"
    messages=[
        {"role": "system", "content": self._get_comprehensive_system_prompt()},
        {"role": "user", "content": prompt}
    ],
    temperature=0.7,
    max_tokens=4000  # å¤§é‡tokenå¯¼è‡´å“åº”æ—¶é—´é•¿
)
            </div>
            
            <h4>è€—æ—¶åŸå› ï¼š</h4>
            <ul>
                <li><strong>æ¨¡å‹å“åº”æ…¢ï¼š</strong> DeepSeek-V3æ¨¡å‹ç”Ÿæˆ4000ä¸ªtokenéœ€è¦è¾ƒé•¿æ—¶é—´</li>
                <li><strong>Promptè¿‡é•¿ï¼š</strong> åŒ…å«å®Œæ•´çš„ç®€å†ä¿¡æ¯å’Œå¤æ‚çš„ç”Ÿæˆè¦æ±‚</li>
                <li><strong>ç½‘ç»œå»¶è¿Ÿï¼š</strong> è°ƒç”¨å¤–éƒ¨APIçš„ç½‘ç»œä¼ è¾“æ—¶é—´</li>
                <li><strong>æ¨¡å‹è´Ÿè½½ï¼š</strong> DeepSeekæœåŠ¡å™¨å¯èƒ½è´Ÿè½½è¾ƒé«˜</li>
            </ul>
            
            <h3>2. æ¬¡è¦é—®é¢˜ï¼šç¼“å­˜æœªç”Ÿæ•ˆ</h3>
            <div class="code-block">
# ç¼“å­˜æ£€æŸ¥è€—æ—¶0.51ç§’ï¼Œè¯´æ˜ç¼“å­˜å¯èƒ½æœªæ­£ç¡®é…ç½®
cached_questions = self.cache_service.get_cached_questions(
    user_id=user_id,
    resume=resume,
    interview_type=interview_type.value,
    total_questions=total_questions,
    difficulty_distribution=difficulty_distribution,
    type_distribution=type_distribution
)
            </div>
        </div>

        <div class="optimization-section">
            <h2>ğŸ’¡ ä¼˜åŒ–æ–¹æ¡ˆ</h2>
            
            <div class="optimization-item">
                <div class="optimization-title">ğŸš€ æ–¹æ¡ˆ1ï¼šå¯ç”¨é—®é¢˜ç¼“å­˜æœºåˆ¶</div>
                <div class="optimization-desc">
                    ä¸ºç›¸åŒç®€å†å’Œé¢è¯•ç±»å‹çš„é—®é¢˜å¯ç”¨Redisç¼“å­˜ï¼Œé¿å…é‡å¤è°ƒç”¨AI API
                </div>
                <div class="optimization-benefit">
                    <strong>é¢„æœŸæ•ˆæœï¼š</strong> ç¼“å­˜å‘½ä¸­æ—¶å“åº”æ—¶é—´ä»58ç§’é™ä½åˆ°1ç§’ä»¥å†…
                </div>
            </div>
            
            <div class="optimization-item">
                <div class="optimization-title">ğŸ¤– æ–¹æ¡ˆ2ï¼šä¼˜åŒ–AI Prompt</div>
                <div class="optimization-desc">
                    ç®€åŒ–promptå†…å®¹ï¼Œå‡å°‘tokenæ•°é‡ï¼Œæé«˜AIå“åº”é€Ÿåº¦
                </div>
                <div class="optimization-benefit">
                    <strong>é¢„æœŸæ•ˆæœï¼š</strong> AIè°ƒç”¨æ—¶é—´ä»55ç§’é™ä½åˆ°20-30ç§’
                </div>
            </div>
            
            <div class="optimization-item">
                <div class="optimization-title">âš¡ æ–¹æ¡ˆ3ï¼šå®ç°å¼‚æ­¥å¤„ç†</div>
                <div class="optimization-desc">
                    å°†é—®é¢˜ç”Ÿæˆæ”¹ä¸ºå¼‚æ­¥ä»»åŠ¡ï¼Œç«‹å³è¿”å›ä¼šè¯IDï¼Œåå°ç”Ÿæˆé—®é¢˜
                </div>
                <div class="optimization-benefit">
                    <strong>é¢„æœŸæ•ˆæœï¼š</strong> ç”¨æˆ·ç­‰å¾…æ—¶é—´ä»58ç§’é™ä½åˆ°2ç§’ä»¥å†…
                </div>
            </div>
            
            <div class="optimization-item">
                <div class="optimization-title">ğŸ”„ æ–¹æ¡ˆ4ï¼šä½¿ç”¨æ›´å¿«çš„AIæ¨¡å‹</div>
                <div class="optimization-desc">
                    è€ƒè™‘ä½¿ç”¨å“åº”æ›´å¿«çš„AIæ¨¡å‹ï¼Œå¦‚GPT-4oæˆ–Claude 3.5 Haiku
                </div>
                <div class="optimization-benefit">
                    <strong>é¢„æœŸæ•ˆæœï¼š</strong> AIè°ƒç”¨æ—¶é—´ä»55ç§’é™ä½åˆ°10-15ç§’
                </div>
            </div>
            
            <div class="optimization-item">
                <div class="optimization-title">ğŸ“¦ æ–¹æ¡ˆ5ï¼šé¢„ç”Ÿæˆé—®é¢˜åº“</div>
                <div class="optimization-desc">
                    ä¸ºå¸¸è§æŠ€èƒ½å’ŒèŒä½é¢„ç”Ÿæˆé—®é¢˜åº“ï¼Œå‡å°‘å®æ—¶AIè°ƒç”¨
                </div>
                <div class="optimization-benefit">
                    <strong>é¢„æœŸæ•ˆæœï¼š</strong> å¤§éƒ¨åˆ†æƒ…å†µä¸‹å“åº”æ—¶é—´é™ä½åˆ°1ç§’ä»¥å†…
                </div>
            </div>
        </div>

        <div class="analysis-section">
            <h2>ğŸ“‹ å®æ–½ä¼˜å…ˆçº§</h2>
            <ol>
                <li><strong>é«˜ä¼˜å…ˆçº§ï¼š</strong> å¯ç”¨é—®é¢˜ç¼“å­˜æœºåˆ¶ï¼ˆç«‹å³å®æ–½ï¼‰</li>
                <li><strong>é«˜ä¼˜å…ˆçº§ï¼š</strong> å®ç°å¼‚æ­¥å¤„ç†ï¼ˆç”¨æˆ·ä½“éªŒæå‡æœ€å¤§ï¼‰</li>
                <li><strong>ä¸­ä¼˜å…ˆçº§ï¼š</strong> ä¼˜åŒ–AI Promptï¼ˆé™ä½AIè°ƒç”¨æ—¶é—´ï¼‰</li>
                <li><strong>ä¸­ä¼˜å…ˆçº§ï¼š</strong> é¢„ç”Ÿæˆé—®é¢˜åº“ï¼ˆé•¿æœŸä¼˜åŒ–ï¼‰</li>
                <li><strong>ä½ä¼˜å…ˆçº§ï¼š</strong> æ›´æ¢AIæ¨¡å‹ï¼ˆæˆæœ¬è€ƒè™‘ï¼‰</li>
            </ol>
        </div>

        <div class="optimization-section">
            <h2>ğŸ¯ é¢„æœŸä¼˜åŒ–æ•ˆæœ</h2>
            <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
                <thead>
                    <tr style="background-color: #f7fafc;">
                        <th style="padding: 12px; text-align: left; border: 1px solid #e2e8f0;">ä¼˜åŒ–æ–¹æ¡ˆ</th>
                        <th style="padding: 12px; text-align: center; border: 1px solid #e2e8f0;">å½“å‰è€—æ—¶</th>
                        <th style="padding: 12px; text-align: center; border: 1px solid #e2e8f0;">ä¼˜åŒ–åè€—æ—¶</th>
                        <th style="padding: 12px; text-align: center; border: 1px solid #e2e8f0;">æå‡å¹…åº¦</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #e2e8f0;">ç¼“å­˜å‘½ä¸­</td>
                        <td style="padding: 12px; text-align: center; border: 1px solid #e2e8f0;">58ç§’</td>
                        <td style="padding: 12px; text-align: center; border: 1px solid #e2e8f0;">1ç§’</td>
                        <td style="padding: 12px; text-align: center; border: 1px solid #e2e8f0; color: #38a169;">98%</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #e2e8f0;">å¼‚æ­¥å¤„ç†</td>
                        <td style="padding: 12px; text-align: center; border: 1px solid #e2e8f0;">58ç§’</td>
                        <td style="padding: 12px; text-align: center; border: 1px solid #e2e8f0;">2ç§’</td>
                        <td style="padding: 12px; text-align: center; border: 1px solid #e2e8f0; color: #38a169;">97%</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #e2e8f0;">Promptä¼˜åŒ–</td>
                        <td style="padding: 12px; text-align: center; border: 1px solid #e2e8f0;">55ç§’</td>
                        <td style="padding: 12px; text-align: center; border: 1px solid #e2e8f0;">25ç§’</td>
                        <td style="padding: 12px; text-align: center; border: 1px solid #e2e8f0; color: #38a169;">55%</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #e2e8f0;">é¢„ç”Ÿæˆé—®é¢˜åº“</td>
                        <td style="padding: 12px; text-align: center; border: 1px solid #e2e8f0;">58ç§’</td>
                        <td style="padding: 12px; text-align: center; border: 1px solid #e2e8f0;">1ç§’</td>
                        <td style="padding: 12px; text-align: center; border: 1px solid #e2e8f0; color: #38a169;">98%</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body>
</html> 