# InterviewPro éƒ¨ç½²è„šæœ¬ä½¿ç”¨æŒ‡å—

## ğŸ“‹ è„šæœ¬æ¦‚è§ˆ

æœ¬ç›®å½•åŒ…å«äº†InterviewProé¡¹ç›®çš„å®Œæ•´éƒ¨ç½²å’Œç»´æŠ¤è„šæœ¬é›†åˆï¼Œå¸®åŠ©æ‚¨è½»æ¾ç®¡ç†é¡¹ç›®éƒ¨ç½²ã€ç›‘æ§ç³»ç»ŸçŠ¶æ€ä»¥åŠå¤„ç†ç´§æ€¥æƒ…å†µã€‚

## ğŸ› ï¸ è„šæœ¬åˆ—è¡¨

### 1. éƒ¨ç½²å‰æ£€æŸ¥è„šæœ¬ (`deploy_checklist.sh`)

**åŠŸèƒ½**: éƒ¨ç½²å‰çš„ç³»ç»Ÿç¯å¢ƒå’Œé…ç½®æ£€æŸ¥

**ä½¿ç”¨æ–¹æ³•**:
```bash
./scripts/deploy_checklist.sh
```

**æ£€æŸ¥é¡¹ç›®**:
- Dockerç¯å¢ƒå®‰è£…æƒ…å†µ
- å¿…è¦æ–‡ä»¶å®Œæ•´æ€§
- Pythonä¾èµ–åŒ…æ£€æŸ¥
- ç³»ç»Ÿèµ„æºçŠ¶å†µ
- ç«¯å£å ç”¨æƒ…å†µ
- Swapé…ç½®çŠ¶æ€
- Dockeré…ç½®éªŒè¯

**è¾“å‡ºç¤ºä¾‹**:
```
ğŸ” InterviewPro éƒ¨ç½²å‰æ£€æŸ¥å¼€å§‹...
==================================
1. æ£€æŸ¥Dockerç¯å¢ƒ...
âœ… Dockerå·²å®‰è£…
âœ… Docker Composeå·²å®‰è£…
...
```

### 2. åˆ†é˜¶æ®µéƒ¨ç½²è„šæœ¬ (`deploy_staged.sh`)

**åŠŸèƒ½**: æŒ‰é˜¶æ®µæœ‰åºéƒ¨ç½²æ‰€æœ‰æœåŠ¡

**ä½¿ç”¨æ–¹æ³•**:
```bash
./scripts/deploy_staged.sh
```

**éƒ¨ç½²é˜¶æ®µ**:
1. **é˜¶æ®µ1**: å¯åŠ¨åŸºç¡€æœåŠ¡ (MySQL + Redis)
2. **é˜¶æ®µ2**: æ„å»ºå¹¶å¯åŠ¨BackendæœåŠ¡
3. **é˜¶æ®µ3**: å¯åŠ¨NginxæœåŠ¡

**ç‰¹æ€§**:
- è‡ªåŠ¨å¤‡ä»½ç°æœ‰é…ç½®
- ç­‰å¾…æœåŠ¡å®Œå…¨å¯åŠ¨
- å¥åº·æ£€æŸ¥éªŒè¯
- è¯¦ç»†çš„æ—¥å¿—è¾“å‡º
- æœ€ç»ˆçŠ¶æ€éªŒè¯

### 3. èµ„æºç›‘æ§è„šæœ¬ (`monitor_resources.sh`)

**åŠŸèƒ½**: å®æ—¶ç›‘æ§ç³»ç»Ÿå’Œåº”ç”¨çŠ¶æ€

**ä½¿ç”¨æ–¹æ³•**:
```bash
# é»˜è®¤10ç§’é—´éš”
./scripts/monitor_resources.sh

# è‡ªå®šä¹‰é—´éš”ï¼ˆç§’ï¼‰
./scripts/monitor_resources.sh 30
```

**ç›‘æ§å†…å®¹**:
- ç³»ç»Ÿèµ„æºä½¿ç”¨ç‡ (CPU/å†…å­˜/ç£ç›˜/Swap)
- Dockerå®¹å™¨çŠ¶æ€
- ç½‘ç»œç«¯å£çŠ¶æ€
- åº”ç”¨å¥åº·æ£€æŸ¥
- æœ€è¿‘æ—¥å¿—ä¿¡æ¯
- èµ„æºä½¿ç”¨è­¦å‘Š

**ç•Œé¢ç‰¹æ€§**:
- å®æ—¶åˆ·æ–°æ˜¾ç¤º
- é¢œè‰²ç¼–ç çŠ¶æ€
- è­¦å‘Šé˜ˆå€¼æé†’
- æŒ‰Ctrl+Cåœæ­¢

### 4. ç´§æ€¥æ¢å¤è„šæœ¬ (`emergency_recovery.sh`)

**åŠŸèƒ½**: å¤„ç†å„ç§ç´§æ€¥æƒ…å†µå’Œæ•…éšœæ¢å¤

**ä½¿ç”¨æ–¹æ³•**:
```bash
# äº¤äº’å¼èœå•
./scripts/emergency_recovery.sh

# ç›´æ¥æ‰§è¡Œç‰¹å®šåŠŸèƒ½
./scripts/emergency_recovery.sh status    # æ£€æŸ¥çŠ¶æ€
./scripts/emergency_recovery.sh restart   # å¿«é€Ÿé‡å¯
./scripts/emergency_recovery.sh rebuild   # é‡å»ºBackend
./scripts/emergency_recovery.sh cleanup   # æ¸…ç†èµ„æº
./scripts/emergency_recovery.sh full      # å®Œæ•´æ¢å¤
```

**æ¢å¤é€‰é¡¹**:
1. æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
2. å¿«é€Ÿé‡å¯æœåŠ¡
3. é‡å»ºBackendæœåŠ¡
4. æ¸…ç†ç³»ç»Ÿèµ„æº
5. æ¢å¤å¤‡ä»½é…ç½®
6. åˆ›å»ºSwapåˆ†åŒº
7. ä¿®å¤æƒé™é—®é¢˜
8. å®Œæ•´æ¢å¤æµç¨‹
9. æ˜¾ç¤ºæœåŠ¡çŠ¶æ€

## ğŸš€ å¿«é€Ÿå¼€å§‹

### é¦–æ¬¡éƒ¨ç½²

```bash
# 1. éƒ¨ç½²å‰æ£€æŸ¥
./scripts/deploy_checklist.sh

# 2. å¦‚æœæ£€æŸ¥é€šè¿‡ï¼Œå¼€å§‹éƒ¨ç½²
./scripts/deploy_staged.sh

# 3. å¯åŠ¨ç›‘æ§
./scripts/monitor_resources.sh
```

### æ—¥å¸¸ç»´æŠ¤

```bash
# æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
./scripts/emergency_recovery.sh status

# ç›‘æ§ç³»ç»Ÿèµ„æº
./scripts/monitor_resources.sh 30

# å¿«é€Ÿé‡å¯æœåŠ¡
./scripts/emergency_recovery.sh restart
```

### æ•…éšœå¤„ç†

```bash
# è¿›å…¥ç´§æ€¥æ¢å¤èœå•
./scripts/emergency_recovery.sh

# æˆ–ç›´æ¥æ‰§è¡Œå®Œæ•´æ¢å¤
./scripts/emergency_recovery.sh full
```

## ğŸ“Š ç›‘æ§æŒ‡æ ‡è¯´æ˜

### ç³»ç»Ÿèµ„æºè­¦å‘Šé˜ˆå€¼

| èµ„æºç±»å‹ | è­¦å‘Šé˜ˆå€¼ | å±é™©é˜ˆå€¼ |
|----------|----------|----------|
| å†…å­˜ä½¿ç”¨ç‡ | 70% | 85% |
| CPUä½¿ç”¨ç‡ | 65% | 80% |
| ç£ç›˜ä½¿ç”¨ç‡ | 75% | 90% |

### ç«¯å£çŠ¶æ€æ£€æŸ¥

| ç«¯å£ | æœåŠ¡ | ç”¨é€” |
|------|------|------|
| 80 | Nginx | å‰ç«¯WebæœåŠ¡ |
| 3306 | MySQL | æ•°æ®åº“æœåŠ¡ |
| 6379 | Redis | ç¼“å­˜æœåŠ¡ |
| 8080 | Backend | APIæœåŠ¡ |

## ğŸ”§ æ•…éšœæ’æŸ¥æŒ‡å—

### å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

#### 1. å†…å­˜ä¸è¶³
**ç—‡çŠ¶**: å®¹å™¨é‡å¯é¢‘ç¹ï¼Œç³»ç»Ÿå“åº”æ…¢
**è§£å†³**: 
```bash
./scripts/emergency_recovery.sh
# é€‰æ‹© "6) åˆ›å»ºSwapåˆ†åŒº"
```

#### 2. Backendå¯åŠ¨å¤±è´¥
**ç—‡çŠ¶**: Backendå®¹å™¨æ— æ³•æ­£å¸¸å¯åŠ¨
**è§£å†³**:
```bash
./scripts/emergency_recovery.sh rebuild
```

#### 3. æœåŠ¡å…¨éƒ¨å¼‚å¸¸
**ç—‡çŠ¶**: æ‰€æœ‰æœåŠ¡éƒ½æ— æ³•è®¿é—®
**è§£å†³**:
```bash
./scripts/emergency_recovery.sh full
```

#### 4. æƒé™é—®é¢˜
**ç—‡çŠ¶**: æ–‡ä»¶æ— æ³•è®¿é—®æˆ–æ‰§è¡Œ
**è§£å†³**:
```bash
./scripts/emergency_recovery.sh
# é€‰æ‹© "7) ä¿®å¤æƒé™é—®é¢˜"
```

## ğŸ“ å¤‡ä»½å’Œæ¢å¤

### è‡ªåŠ¨å¤‡ä»½

éƒ¨ç½²è„šæœ¬ä¼šè‡ªåŠ¨åˆ›å»ºå¤‡ä»½ï¼š
- ä½ç½®: `backups/YYYYMMDD_HHMMSS/`
- åŒ…å«: `docker-compose.prod.yml`, `requirements.txt`, `Dockerfile.prod`

### æ‰‹åŠ¨æ¢å¤

```bash
./scripts/emergency_recovery.sh
# é€‰æ‹© "5) æ¢å¤å¤‡ä»½é…ç½®"
# ç„¶åè¾“å…¥å¤‡ä»½ç›®å½•åç§°
```

## ğŸ”„ å®šæœŸç»´æŠ¤å»ºè®®

### æ¯æ—¥æ£€æŸ¥
```bash
# å¿«é€ŸçŠ¶æ€æ£€æŸ¥
./scripts/emergency_recovery.sh status
```

### æ¯å‘¨ç»´æŠ¤
```bash
# æ¸…ç†ç³»ç»Ÿèµ„æº
./scripts/emergency_recovery.sh cleanup
```

### æ¯æœˆç»´æŠ¤
```bash
# å®Œæ•´ç³»ç»Ÿæ£€æŸ¥
./scripts/deploy_checklist.sh

# å¦‚æœ‰é—®é¢˜ï¼Œæ‰§è¡Œå®Œæ•´æ¢å¤
./scripts/emergency_recovery.sh full
```

## ğŸš¨ ç´§æ€¥æƒ…å†µå¤„ç†

### CPU 100%
1. ç«‹å³åœæ­¢ç›‘æ§é¿å…æ›´å¤šæ—¥å¿—
2. æ‰§è¡Œç´§æ€¥æ¢å¤: `./scripts/emergency_recovery.sh restart`
3. å¦‚æœæ— æ•ˆï¼Œæ‰§è¡Œ: `./scripts/emergency_recovery.sh full`

### å†…å­˜è€—å°½
1. åˆ›å»ºSwap: `./scripts/emergency_recovery.sh` â†’ é€‰æ‹©6
2. æ¸…ç†èµ„æº: `./scripts/emergency_recovery.sh cleanup`
3. é‡å¯æœåŠ¡: `./scripts/emergency_recovery.sh restart`

### ç£ç›˜ç©ºé—´ä¸è¶³
1. æ¸…ç†Docker: `./scripts/emergency_recovery.sh cleanup`
2. æ¸…ç†æ—¥å¿—: `find logs -name "*.log" -mtime +7 -delete`
3. æ¸…ç†å¤‡ä»½: `find backups -mtime +30 -type d -exec rm -rf {} \;`

## ğŸ“ æ”¯æŒå’Œåé¦ˆ

å¦‚æœè„šæœ¬ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹è„šæœ¬æ—¥å¿—è¾“å‡º
2. æ£€æŸ¥Dockeræ—¥å¿—: `docker-compose -f docker-compose.prod.yml logs`
3. è¿è¡Œç³»ç»Ÿè¯Šæ–­: `./scripts/emergency_recovery.sh status`

## ğŸ“ æ›´æ–°æ—¥å¿—

- v1.0.0: åˆå§‹ç‰ˆæœ¬ï¼ŒåŒ…å«åŸºç¡€éƒ¨ç½²å’Œç›‘æ§åŠŸèƒ½
- åŸºäºå®é™…éƒ¨ç½²ç»éªŒä¼˜åŒ–çš„è„šæœ¬é›†åˆ
- åŒ…å«å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶

---

**æ³¨æ„**: æ‰€æœ‰è„šæœ¬éƒ½éœ€è¦Dockeræƒé™ï¼Œå»ºè®®å°†ç”¨æˆ·æ·»åŠ åˆ°dockerç”¨æˆ·ç»„æˆ–ä½¿ç”¨sudoæ‰§è¡Œã€‚ 